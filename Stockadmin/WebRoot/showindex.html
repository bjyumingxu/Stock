<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  
  
  
  
    <script type="text/javascript" src="http://cdn.hcharts.cn/jquery/jquery-1.8.3.min.js"></script>
  <script type="text/javascript" src="http://cdn.hcharts.cn/highcharts/highcharts.js"></script>
  <script type="text/javascript" src="http://cdn.hcharts.cn/highcharts/exporting.js"></script>
  <script>
  
  
  
  /**
  function aaa(){
	  
 
	  $.ajax({
	      url:"Stockselect/test3.do",
	      method:"get",
	      dataType: "json",
	      success:function(data){
	    	
	    	 
	    	for (var i=0;i<data.length;i++) {                                    
	    		yy= data.sindex[i].nowpri;
	    		
	    		
	    		alert(yy);
	    	}
	    
	     },

	     error: function () { alert("error"); }

	    });
	     
     //alert(data.sindex[0].nowpri); 
  }
  **/
  
  $(function aaa() {
	    $('#container1').highcharts({
	        title: {
	            text: '上证指数',
	            x: -20 //center
	        },
	        subtitle: {
	            text: 'wzstock',
	            x: -20
	        },
	        xAxis: {
	            title:{
	                text:'时间'
	            },
	            type : 'datetime'
	        },
	        yAxis: {
	            title: {
	                text: '金额'
	            },
	            plotLines: [{
	                value: 0,
	                width: 1,
	                color: '#808080'
	            }]
	        },
	        tooltip: {
	            valueSuffix: '￥'
	        },
	        legend: {
	            layout: 'vertical',
	            align: 'right',
	            verticalAlign: 'middle',
	            borderWidth: 0
	        },
	        
	        series: [{
	        	
	        	
	            name: '当前价格',
	            data: (function() {   
	            var yy = new Array;
	            var xx = new Array;
	            	$.ajax({
	          	      url:"Stockselect/test3.do",
	          	      method:"get",
	          	      async:false,
	          	      dataType: "json",
	          	      success:function(date){
	          	    	  //console.log(date);
	          	    	//console.log(date.sindex[2].stockindexId);
	          	    	for (var i=0;i<date.sindex.length;i++) {                                    
	          	    		yy[i] = date.sindex[i].nowpri;
	          	    		xx[i] = date.sindex[i].time;
	          	    		
	          	    	}
	          	    	
	          	     },

	          	     error: function () { alert("error"); }

	          	    });
	                
                    // generate an array of random data                             
                    var data = [],                                                  
                        time = (new Date()).getTime(),                              
                        i;                                                          
                                                                                    
                    	for (i=0;i<yy.length;i++) {                                    
                        data.push({                                                 
                            //x: time + i * 1000,  
                            x: xx[i]+28800000,
                            y: yy[i]                                        
                        });                                                         
                    }       
                    	console.log(data);
                    return data;                                                    
                })() 
	    }]
	});
	    
	    
	    
	    
	    $('#container2').highcharts({
	        title: {
	            text: '深证指数',
	            x: -20 //center
	        },
	        subtitle: {
	            text: 'wzstock',
	            x: -20
	        },
	        xAxis: {
	            title:{
	                text:'时间'
	            },
	            type : 'datetime'
	        },
	        yAxis: {
	            title: {
	                text: '数值'
	            },
	            plotLines: [{
	                value: 0,
	                width: 1,
	                color: '#808080'
	            }]
	        },
	        tooltip: {
	            valueSuffix: '￥'
	        },
	        legend: {
	            layout: 'vertical',
	            align: 'right',
	            verticalAlign: 'middle',
	            borderWidth: 0
	        },
	        
	        series: [{
	        	
	        	
	            name: '当前价格',
	            data: (function() {  
	            var xx = new Array;
	            var yy = new Array;
	            	$.ajax({
	          	      url:"Stockselect/test3.do",
	          	      method:"get",
	          	      async:false,
	          	      dataType: "json",
	          	      success:function(date){
	          	    	//console.log(date.zindex[2].stockindexId);
	          	    	for (var i=0;i<date.zindex.length;i++) {                                    
	          	    		yy[i] = date.zindex[i].nowpri;
	          	    		xx[i] = date.sindex[i].time;
	          	    	}
	          	    	
	          	     },

	          	     error: function () { alert("error"); }

	          	    });
	                
                    // generate an array of random data                             
                    var data = [],                                                  
                        time = (new Date()).getTime(),                              
                        i;                                                          
                                                                                    
                    	for (i=0;i<yy.length;i++) {                                    
                        data.push({    
                        	x: xx[i]+28800000,
                           // x: time + i * 1000,                                     
                            y: yy[i]                                        
                        });                                                         
                    }       
                    	//console.log(data);
                    return data;                                                    
                })() 
	    }]
	});
});

  
                                                             				
  </script>
</head>
<body>
  <div id="container1" style="min-width:700px;height:400px"></div>
  <div id="container2" style="min-width:700px;height:400px"></div>
</body>
</html>